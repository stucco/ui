<meta charset="US-ASCII">
<link rel="import" href="../../bower_components/polymer/polymer.html">
<polymer-element name="history-component" attributes="historyView currentVertex currentEdges">
    <template>
      <style type="text/css">
        table {
          color: white;
          border-collapse: collapse;
          border-spacing: 1px;
          font-size: 18px;
          border: 1px solid black;
          width: 80%;
          height : 100%;
          background-color: gray;
        }
        tr, td {
          padding: 8px;
          border: 1px solid black;
          vertical-align: top;
        }
        #headerRow {
          font-weight: bold;
          background-color: white;
          color: black;
          text-align: center;
        }
      </style>
      <table>
      	<tr id="headerRow">
          <td>ID</td>
          <td>Name</td>
          <td>Type</td>
          <td>Source</td>
          <td>Description</td>
        </tr>
        <template repeat="{{element, index in historyStack}}">
        	<tr id="{{index}}" on-click="{{showDetails}}" class="{{element['vertex']['vertexType']}}">
            	<td>{{element["vertex"]["_id"]}}</td>
                <td>{{element["vertex"]["name"]}}</td>
            	<td>{{element["vertex"]["vertexType"]}}</td>
            	<td>{{element["vertex"]["source"]}}</td>
            	<td>{{element["vertex"]["description"]}}</td>
          	</tr>
        </template>
       </table>
    </template>
    <script>
        Polymer("history-component", {
            historyStack : [],
            currentVertex : {},
            currentEdges : [],
            currentEdgesChanged : function() {
            	if (this.currentVertex["_id"]) {
            		var newHistoryElement = {};
            		newHistoryElement["vertex"] = this.currentVertex;
            		newHistoryElement["edges"] = this.currentEdges;
            		this.historyStack.push(newHistoryElement);
            		if (this.historyStack.length > 10) {
            			this.historyStack.shift();
            		}
            	}
            },
            showDetails : function(event, detail, sender) {
            	var stackIndex = sender.id;
		        this.currentVertex = this.historyStack[stackIndex]["vertex"];
		        this.currentEdges = this.historyStack[stackIndex]["edges"];
		    }
		});
    </script>
</polymer-element>