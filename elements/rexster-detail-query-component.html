<meta charset="US-ASCII">
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<polymer-element name="rexster-detail-query-component" attributes="queryHost queryPort queryParams vertex edges">
    <template>
    	<core-ajax id="vertexReq" url="http://{{queryHost}}:{{queryPort}}/graphs/graph/vertices/{{queryParams}}" handleAs="json" contentType="application/json" headers='{"Accept": "application/json"}' on-core-response="{{getVertices}}"></core-ajax>
      <core-ajax id="edgeReq" url="http://{{queryHost}}:{{queryPort}}/graphs/graph/vertices/{{queryParams}}/bothE" handleAs="json" contentType="application/json" headers='{"Accept": "application/json"}' on-core-response="{{getEdges}}"></core-ajax>
    </template>
    <script>
        Polymer('rexster-detail-query-component', {
          queryHost : "localhost",
          queryPort : 8182,
		      queryParams : "",
          vertex : [],
		      edges : [],
          queryParamsChanged : function() {
          	  if (this.queryParams != "") {
              	this.$.vertexReq.go();
              }
          },
          getVertices : function() {
              this.vertex = this.$.vertexReq.response.results;
              this.$.edgeReq.go();
          },
          getEdges : function() {
              this.edges = this.$.edgeReq.response.results;
              this.queryParams = "";
          }
        });
    </script>
</polymer-element>
